%ul.breadcrumb
  %li
    %a{:href => "#"} Home
  %li
    %a{:href => "#"} Pages
  %li.active Timeline
.page-content-wrap
  .row
    .col-md-3
      .panel.panel-build
        .panel-body.profile#profile_image
          .profile-image
            - if @user.avatar.present?
              %img{ src: @user.avatar.picture.thumb }
            - else
              %img{ src: asset_path("member.png") }
          .profile-data
            .profile-data-name #{ @user.name }
        - if is_current_user?
          .panel-body.list-group.border-bottom
            .list-group-item
              %b
                Name:
              = @user.name
              .pull-right#name
                %a
                  %span.fa.fa-edit
            .list-group-item
              %b
                Email:
              = @user.email
            .list-group-item
              %b
                Phone number:
              = @user.phone_number
              .pull-right#phone_number
                %a
                  %span.fa.fa-edit
            .list-group-item
              %b
                Birthday:
              - if @user.birthday.present?
                = @user.birthday.strftime("%d/%m/%Y")
              .pull-right#birthday
                %a
                  %span.fa.fa-edit
            .list-group-item
              %b
                Address:
              = @user.address
              .pull-right#address
                %a
                  %span.fa.fa-edit
        - else
          .panel-body.list-group.border-bottom
            .list-group-item
              %b
                Name:
              = @user.name
            .list-group-item
              %b
                Birthday:
              = @user.birthday
            .list-group-item
              %b
                #{ current_user.common_friend(@user) } common friends
              .pull-right{ style: "margin-bottom: 10px;" }
                - if current_user.following?(@user)
                  - if @user.following?(current_user)
                    = link_to "Unfriend", friend_path(user_id: @user.id, type: "Unfriend"), method: "delete", class: "btn btn-default"
                  - else
                    = link_to "Unfollow", friend_path(user_id: @user.id, type: "Unfollow"), method: "delete", class: "btn btn-default"
                - else
                  - if @user.following?(current_user)
                    = link_to "Accept Friend", friend_path(user_id: @user.id), method: "patch", class: "btn btn-success"
                  - else
                    = link_to "Add Friend", friends_path(user_id: @user.id), method: "post", class: "btn btn-info"
    .col-md-9
      .row
        .col-md-12
          - if is_current_user?
            = render "/shared/new_post", group_id: nil
      = render "/shared/posts", posts: @posts

#change-name.modal.fade{"aria-hidden" => "true", "aria-labelledby" => "myModalLabel", :role => "dialog", :tabindex => "-1"}
  .modal-dialog{:role => "document"}
    .modal-content
      .modal-header
        %button.close{"aria-label" => "Close", "data-dismiss" => "modal", :type => "button"}
          %span{"aria-hidden" => "true"} ×
        %h4#myModalLabel.modal-title Change your name
      .modal-body
        .form-horizontal
          = form_for @user do |f|
            .form-group
              .col-md-12
                .title
                  Change your name
                = f.text_field :name, class: "form-control", placeholder: @user.name
            .form-group
              .col-md-12
                = f.submit "Save", class: "btn btn-success"
#change-phone_number.modal.fade{"aria-hidden" => "true", "aria-labelledby" => "myModalLabel", :role => "dialog", :tabindex => "-1"}
  .modal-dialog{:role => "document"}
    .modal-content
      .modal-header
        %button.close{"aria-label" => "Close", "data-dismiss" => "modal", :type => "button"}
          %span{"aria-hidden" => "true"} ×
        %h4#myModalLabel.modal-title Change your phone_number
      .modal-body
        .form-horizontal
          = form_for @user do |f|
            .form-group
              .col-md-12
                .title
                  Change your phone_number
                = f.text_field :phone_number, class: "form-control", placeholder: @user.phone_number
            .form-group
              .col-md-12
                = f.submit "Save", class: "btn btn-success"
#change-birthday.modal.fade{"aria-hidden" => "true", "aria-labelledby" => "myModalLabel", :role => "dialog", :tabindex => "-1"}
  .modal-dialog{:role => "document"}
    .modal-content
      .modal-header
        %button.close{"aria-label" => "Close", "data-dismiss" => "modal", :type => "button"}
          %span{"aria-hidden" => "true"} ×
        %h4#myModalLabel.modal-title Change your birthday
      .modal-body
        .form-horizontal
          = form_for @user do |f|
            .form-group
              .col-md-12
                .title
                  Change your birthday
                = f.text_field :birthday, class: "form-control", placeholder: @user.birthday
            .form-group
              .col-md-12
                = f.submit "Save", class: "btn btn-success"
#change-address.modal.fade{"aria-hidden" => "true", "aria-labelledby" => "myModalLabel", :role => "dialog", :tabindex => "-1"}
  .modal-dialog{:role => "document"}
    .modal-content
      .modal-header
        %button.close{"aria-label" => "Close", "data-dismiss" => "modal", :type => "button"}
          %span{"aria-hidden" => "true"} ×
        %h4#myModalLabel.modal-title Change your address
      .modal-body
        .form-horizontal
          = form_for @user do |f|
            .form-group
              .col-md-12
                .title
                  Change your address
                = f.text_field :address, class: "form-control", placeholder: @user.address
            .form-group
              .col-md-12
                = f.submit "Save", class: "btn btn-success"
#change-avatar.modal.fade{"aria-hidden" => "true", "aria-labelledby" => "myModalLabel", :role => "dialog", :tabindex => "-1"}
  .modal-dialog{:role => "document"}
    .modal-content
      .modal-header
        %button.close{"aria-label" => "Close", "data-dismiss" => "modal", :type => "button"}
          %span{"aria-hidden" => "true"} ×
        %h4#myModalLabel.modal-title Change your avatar
      .modal-body
        .form-horizontal
          = form_for @user do |f|
            .form-group
              .col-md-12
                .title
                  Avatar
                = f.file_field :avatar, multiple: false, class: "file"
            .form-group
              .col-md-12
                = f.submit "Save", class: "btn btn-success"
:javascript
  $("#name").click(function() {
    $("#change-name").modal("show");
  });

  $("#phone_number").click(function() {
    $("#change-phone_number").modal("show");
  });

  $("#birthday").click(function() {
    $("#change-birthday").modal("show");
  });

  $("#address").click(function() {
    $("#change-address").modal("show");
  });

  $("#profile_image").click(function() {
    $("#change-avatar").modal("show");
  });
