%ul.breadcrumb
  %li
    %a{:href => "#"} Home
  %li
    %a{:href => "#"} Pages
  %li.active Timeline
.page-content-wrap
  .row
    .col-md-3
      .panel.panel-build
        .panel-body.profile
          .profile-image
            - if @user.avatar.present?
              %img{ src: @user.avatar.picture.thumb }
            - else
              %img{ src: asset_path("member.png") }
          .profile-data
            .profile-data-name #{ @user.name }
        - if is_current_user?
          .panel-body.list-group.border-bottom
            .list-group-item
              %b
                Name:
              = @user.name
              .pull-right#name
                %a
                  %span.fa.fa-edit
            .list-group-item
              %b
                Email:
              = @user.email
            .list-group-item
              %b
                Phone number:
              = @user.phone_number
              .pull-right#phone_number
                %a
                  %span.fa.fa-edit
            .list-group-item
              %b
                Birthday:
              = @user.birthday
              .pull-right#birthday
                %a
                  %span.fa.fa-edit
        - else
          .panel-body.list-group.border-bottom
            .list-group-item
              %b
                Name:
              = @user.name
            .list-group-item
              %b
                Birthday:
              = @user.birthday
            .list-group-item
              %b
                #{ current_user.common_friend(@user) } common friends
              .pull-right{ style: "margin-bottom: 10px;" }
                - if current_user.following?(@user)
                  - if @user.following?(current_user)
                    = link_to "Unfriend", friend_path(user_id: @user.id, type: "Unfriend"), method: "delete", class: "btn btn-default"
                  - else
                    = link_to "Unfollow", friend_path(user_id: @user.id, type: "Unfollow"), method: "delete", class: "btn btn-default"
                - else
                  - if @user.following?(current_user)
                    = link_to "Accept Friend", friend_path(user_id: @user.id), method: "patch", class: "btn btn-success"
                  - else
                    = link_to "Add Friend", friends_path(user_id: @user.id), method: "post", class: "btn btn-info"
    .col-md-9
      .row
        .col-md-12
          .panel.panel-default
            .panel-body
              %h3 What happened?
              .form-horizontal{:role => "form"}
                = form_for @post, url: user_posts_path(user_id: current_user.id), method: :post do |f|
                  .form-group
                    .col-md-12
                      .input-group
                        %span.input-group-addon
                          %span.fa.fa-pencil
                        = f.text_area :content, placeholder: "What's in your mind?", :rows => "1", class: "form-control"
                  .form-group
                    .col-md-12
                      .btn-group.pull-left
                        %button.btn.btn-primary
                          %span.fa.fa-camera
                        %button.btn.btn-primary
                          %span.fa.fa-map-marker
                        %button.btn.btn-primary
                          %span.fa.fa-calendar
                      .pull-right
                        = f.submit "Post", class: "btn btn-success"
      - @posts.each do |post|
        .row
          .col-md-12
            .timeline.timeline-right
              .timeline-item.timeline-item-right
                .timeline-item-content
                  .timeline-heading
                    .user-name
                      - if @user.avatar.present?
                        %img{ src: @user.avatar.picture.thumb }
                      - else
                        %img.avatar-user{ src: asset_path("member.png") }
                      = post.user.name
                    = post.created_at.strftime("%F, %H:%M")
                  .timeline-body
                    %p
                      = post.content
                  .timeline-body.comments
                    - post.comments.each do |comment|
                      .comment-item
                        - if @user.avatar.present?
                          %img.avatar-user{ src: @user.avatar.picture.thumb }
                        - else
                          %img.avatar-user{ src: asset_path("member.png") }
                        %p.comment-head
                          = comment.user.name
                        %p
                          = comment.content
                        %small.pull-right
                          = comment.created_at.strftime("%F, %H:%M")
                    .comment-write
                      .row
                        .col-md-1
                          - if current_user.avatar.present?
                            %img.avatar-user{ src: current_user.avatar.picture.thumb }
                          - else
                            %img.avatar-user{ src: asset_path("member.png") }
                        .col-md-11
                          = form_for @comment, url: user_post_comments_path(user_id: current_user.id, post_id: post.id) do |f|
                            .form-group.col-md-10
                              = f.text_area :content, placeholder: "Write a comment", :rows => "1", class: "form-control"
                            .form-group.col-md-2
                              .pull-right
                                = f.submit "Post", class: "btn btn-success"
                    .timeline-footer
                      %a{:href => "#"} Read more
                      .pull-right
                        %a{:href => "#"}
                          %span.fa.fa-comment
                          35
                        %a{:href => "#"}
                          %span.fa.fa-share
#change-name.modal.fade{"aria-hidden" => "true", "aria-labelledby" => "myModalLabel", :role => "dialog", :tabindex => "-1"}
  .modal-dialog{:role => "document"}
    .modal-content
      .modal-header
        %button.close{"aria-label" => "Close", "data-dismiss" => "modal", :type => "button"}
          %span{"aria-hidden" => "true"} ×
        %h4#myModalLabel.modal-title Change your name
      .modal-body
        .form-horizontal
          = form_for @user do |f|
            .form-group
              .col-md-12
                .title
                  Change your name
                = f.text_field :name, class: "form-control", placeholder: @user.name
            .form-group
              .col-md-12
                = f.submit "Save", class: "btn btn-success"
#change-phone_number.modal.fade{"aria-hidden" => "true", "aria-labelledby" => "myModalLabel", :role => "dialog", :tabindex => "-1"}
  .modal-dialog{:role => "document"}
    .modal-content
      .modal-header
        %button.close{"aria-label" => "Close", "data-dismiss" => "modal", :type => "button"}
          %span{"aria-hidden" => "true"} ×
        %h4#myModalLabel.modal-title Change your phone_number
      .modal-body
        .form-horizontal
          = form_for @user do |f|
            .form-group
              .col-md-12
                .title
                  Change your phone_number
                = f.text_field :phone_number, class: "form-control", placeholder: @user.phone_number
            .form-group
              .col-md-12
                = f.submit "Save", class: "btn btn-success"
#change-birthday.modal.fade{"aria-hidden" => "true", "aria-labelledby" => "myModalLabel", :role => "dialog", :tabindex => "-1"}
  .modal-dialog{:role => "document"}
    .modal-content
      .modal-header
        %button.close{"aria-label" => "Close", "data-dismiss" => "modal", :type => "button"}
          %span{"aria-hidden" => "true"} ×
        %h4#myModalLabel.modal-title Change your birthday
      .modal-body
        .form-horizontal
          = form_for @user do |f|
            .form-group
              .col-md-12
                .title
                  Change your birthday
                = f.text_field :birthday, class: "form-control", placeholder: @user.birthday
            .form-group
              .col-md-12
                = f.submit "Save", class: "btn btn-success"
:javascript
  $("#name").click(function() {
    $("#change-name").modal("show");
  });

  $("#phone_number").click(function() {
    $("#change-phone_number").modal("show");
  });

  $("#birthday").click(function() {
    $("#change-birthday").modal("show");
  });
