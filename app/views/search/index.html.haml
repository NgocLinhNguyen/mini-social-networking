%ul.breadcrumb
  %li
    %a{ href: "#" }
      Home
  %li.active
    Search
.page-content-wrap
  .row
    .col-md-10.col-md-offset-1
      .panel.panel-default
        .panel-heading
          %h1
            Search Results
        .panel-body
          .row
            - if @users.length == 0 && @groups.length == 0
              %h4
                No Result Found
            - else
              - if @users.length > 0
                .col-md-6
                  .panel.panel-default
                    .panel-heading
                      %h3
                        %span.fa.fa-user
                        Users
                    .panel-body
                      %table.table-user-search
                        - @users.each do |user|
                          - if user.id == current_user.id
                            %tr
                              %td{ style: "width: 30%;" }
                                - if user.avatar.present?
                                  %img.avatar-search{ src: user.avatar.picture.thumb }
                                - else
                                  %img.avatar-search{ src: asset_path("member.png") }
                              %td{ colspan: 2, style: "width: 70%; padding-left: 10px;" }
                                %h4
                                  = link_to "#{ user.name }", user_path(user)
                          - else
                            %tr
                              %td{ style: "width: 30%;" }
                                - if user.avatar.present?
                                  %img.avatar-search{ src: user.avatar.picture.thumb }
                                - else
                                  %img.avatar-search{ src: asset_path("member.png") }
                              %td{ style: "width: 50%; padding-left: 10px;" }
                                %h4
                                  = link_to "#{ user.name }", user_path(user)
                                %small{ style: "font-style: italic; font-size: 11px;" }
                                  #{ user.common_friends(current_user).length } common friends
                              %td{ style: "width: 20%;" }
                                - if current_user.following?(user)
                                  - if user.following?(current_user)
                                    = link_to "Unfriend", friend_path(user_id: user.id, type: "Unfriend", id: 0), method: "delete", class: "btn btn-default"
                                  - else
                                    = link_to "Unfollow", friend_path(user_id: user.id, type: "Unfollow", id: 0), method: "delete", class: "btn btn-default"
                                - else
                                  - if user.following?(current_user)
                                    = link_to "Accept Friend", friend_path(user_id: user.id), method: "patch", class: "btn btn-success"
                                  - else
                                    = link_to "Add Friend", friends_path(user_id: user.id), method: "post", class: "btn btn-info"
              - if @groups.length > 0
                .col-md-6
                  .panel.panel-default
                    .panel-heading
                      %h3
                        %span.fa.fa-users
                        Groups
                    .panel-body
                      %table.table-user-search
                        - @groups.each do |group|
                          %tr
                            %td{ style: "width: 30%;" }
                              - if group.cover.present?
                                %img.avatar-search{ src: "#{ group.cover.try(:picture).try(:profile_normal) }" }
                              - else
                                %img.avatar-search{ src: asset_path("group.png") }
                            %td{ style: "width: 50%; padding-left: 10px;" }
                              %h4
                                = link_to "#{ group.name }", group_path(group)
                              %small{ style: "font-style: italic; font-size: 11px;" }
                                = group.kind.capitalize
                            %td{ style: "width: 20%; padding-right: 10px;" }
                              - if current_user.id == group.owner_id
                                %a.btn.btn-info
                                  %span.fa.fa-bookmark
                                  Owner
                              - else
                                - if current_user.belong_to_group?(group)
                                  = link_to "Out Group", remove_user_from_group_path(group_id: group.id), method: :delete, class: "btn btn-danger"
                                - else
                                  = link_to "Join", add_user_to_group_path(group_id: group.id), method: :post, class: "btn btn-success"
